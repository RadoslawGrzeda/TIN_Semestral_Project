<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>System Wynajmu s27383</title>
    <link rel="stylesheet" href="style.css">
    <script src="api.js"></script>
    <script src="auth_script.js"></script>
    <script src="user_script.js"></script>
    <script src="car.script.js"></script>
    <script src="rental_script.js"></script>
</head>
<body>
    <div class="sidebar" style="display:none">
        <button onclick="router('users')">Użytkownicy</button>
        <button onclick="router('cars')">Samochody</button>
        <button onclick="router('rentals')">Wynajmy</button>
    </div>      

    <div class="main" style="display:none">
        <h1 id="page-title">Wybierz moduł</h1>
        <div id="function-menu" style="display:none; margin-bottom:20px;">
            <button id="btn-list">Lista</button>
            <button id="btn-details">Szczegóły</button>
            <button id="btn-add">Dodaj</button>
        </div>
        <div id="display-area"></div>
    </div>
    
    <script>
        function router(modul) {
            document.getElementById('function-menu').style.display = 'block';
            document.getElementById('page-title').innerText = "Zarządzanie: " + modul.toUpperCase();
            document.getElementById('display-area').innerHTML = "Wybierz akcję.";

            // Role check
            const role = localStorage.getItem('user_role');
            const btnAdd = document.getElementById('btn-add');

            // Show/Hide Add button based on role
            if (role === 'admin') {
                btnAdd.style.display = 'inline-block';
            } else {
                btnAdd.style.display = 'none';
            }

            if(modul === 'users') {
                document.getElementById('btn-list').onclick = () => UserModule.usersList();
                document.getElementById('btn-details').onclick = () => UserModule.detailUserList();
                if(role === 'admin') document.getElementById('btn-add').onclick = () => UserModule.addUserForm();
            } else if(modul === 'cars') {
                document.getElementById('btn-list').onclick = () => CarModule.carList();
                document.getElementById('btn-details').onclick = () => CarModule.detailCarList();
                if(role === 'admin') document.getElementById('btn-add').onclick = () => CarModule.addCarForm();
            } else if(modul === 'rentals') {
                document.getElementById('btn-list').onclick = () => RentalModule.rentalsList();
                document.getElementById('btn-details').onclick = () => RentalModule.detailRentalList();
                if(role === 'admin') document.getElementById('btn-add').onclick = () => RentalModule.addRentalForm();
            }
        }
    </script>
</body>
</html>