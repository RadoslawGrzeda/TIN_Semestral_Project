<!DOCTYPE html>
<html lang="pl">
<head>
    <meta charset="UTF-8">
    <title>System Wynajmu s27383</title>
    <link rel="stylesheet" href="style.css">
    <script src="i18n.js"></script>
    <script src="api.js"></script>
    <script src="auth_script.js"></script>
    <script src="user_script.js"></script>
    <script src="car.script.js"></script>
    <script src="rental_script.js"></script>
</head>
<body>
    <div style="position:absolute; top:10px; right:10px;">
        <button onclick="setLanguage('pl')">PL</button>
        <button onclick="setLanguage('en')">EN</button>
    </div>

    <div class="sidebar" style="display:none">
        <button onclick="router('users')" id="menu-users">Użytkownicy</button>
        <button onclick="router('cars')" id="menu-cars">Samochody</button>
        <button onclick="router('rentals')" id="menu-rentals">Wynajmy</button>
    </div>      

    <div class="main" style="display:none">
        <h1 id="page-title">Wybierz moduł</h1>
        <div id="function-menu" style="display:none; margin-bottom:20px;">
            <button id="btn-list">Lista</button>
            <button id="btn-details">Szczegóły</button>
            <button id="btn-add">Dodaj</button>
        </div>
        <div id="display-area"></div>
    </div>
    
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('menu-users').innerText = t('menu_users');
            document.getElementById('menu-cars').innerText = t('menu_cars');
            document.getElementById('menu-rentals').innerText = t('menu_rentals');
            
            document.getElementById('btn-list').innerText = t('btn_list');
            document.getElementById('btn-details').innerText = t('btn_details');
            document.getElementById('btn-add').innerText = t('btn_add');
            document.getElementById('page-title').innerText = t('page_title_manage'); 
        });

        function router(modul) {
            document.getElementById('function-menu').style.display = 'block';
            document.getElementById('page-title').innerText = t('page_title_manage') + t('menu_' + modul);
            document.getElementById('display-area').innerHTML = t('select_action');

            const role = localStorage.getItem('user_role');
            const btnAdd = document.getElementById('btn-add');

            if (role === 'admin') {
                btnAdd.style.display = 'inline-block';
            } else {
                btnAdd.style.display = 'none';
            }

            if(modul === 'users') {
                document.getElementById('btn-list').onclick = () => UserModule.usersList();
                document.getElementById('btn-details').onclick = () => UserModule.detailUserList();
                if(role === 'admin') document.getElementById('btn-add').onclick = () => UserModule.addUserForm();

            } else if(modul === 'cars') {
                document.getElementById('btn-list').onclick = () => CarModule.carList();
                document.getElementById('btn-details').onclick = () => CarModule.detailCarList();
                if(role === 'admin') document.getElementById('btn-add').onclick = () => CarModule.addCarForm();
                
            } else if(modul === 'rentals') {
                document.getElementById('btn-list').onclick = () => RentalModule.rentalsList();
                document.getElementById('btn-details').onclick = () => RentalModule.detailRentalList();
                if(role === 'admin') document.getElementById('btn-add').onclick = () => RentalModule.addRentalForm();
            }
        }
    </script>
</body>
</html>